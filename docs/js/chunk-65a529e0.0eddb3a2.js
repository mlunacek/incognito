(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65a529e0"],{"0881":function(e){e.exports=JSON.parse('{"name":"@aws-sdk/client-lex-runtime-service","description":"AWS SDK for JavaScript Lex Runtime Service Client for Node.js, Browser and React Native","version":"1.0.0-rc.4","scripts":{"clean":"npm run remove-definitions && npm run remove-dist","build-documentation":"npm run clean && typedoc ./","prepublishOnly":"yarn build","pretest":"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test:unit":"mocha **/cjs/**/*.spec.js","test":"yarn test:unit","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json","build":"yarn build:cjs && yarn build:es"},"main":"./dist/cjs/index.js","types":"./types/index.d.ts","module":"./dist/es/index.js","browser":{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},"sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"1.0.0-rc.3","@aws-sdk/credential-provider-node":"1.0.0-rc.3","@aws-sdk/fetch-http-handler":"1.0.0-rc.3","@aws-sdk/hash-node":"1.0.0-rc.3","@aws-sdk/invalid-dependency":"1.0.0-rc.3","@aws-sdk/middleware-content-length":"1.0.0-rc.3","@aws-sdk/middleware-host-header":"1.0.0-rc.3","@aws-sdk/middleware-logger":"1.0.0-rc.4","@aws-sdk/middleware-retry":"1.0.0-rc.4","@aws-sdk/middleware-serde":"1.0.0-rc.3","@aws-sdk/middleware-signing":"1.0.0-rc.3","@aws-sdk/middleware-stack":"1.0.0-rc.4","@aws-sdk/middleware-user-agent":"1.0.0-rc.3","@aws-sdk/node-config-provider":"1.0.0-rc.3","@aws-sdk/node-http-handler":"1.0.0-rc.3","@aws-sdk/protocol-http":"1.0.0-rc.3","@aws-sdk/smithy-client":"1.0.0-rc.4","@aws-sdk/types":"1.0.0-rc.3","@aws-sdk/url-parser-browser":"1.0.0-rc.3","@aws-sdk/url-parser-node":"1.0.0-rc.3","@aws-sdk/util-base64-browser":"1.0.0-rc.3","@aws-sdk/util-base64-node":"1.0.0-rc.3","@aws-sdk/util-body-length-browser":"1.0.0-rc.3","@aws-sdk/util-body-length-node":"1.0.0-rc.3","@aws-sdk/util-user-agent-browser":"1.0.0-rc.3","@aws-sdk/util-user-agent-node":"1.0.0-rc.3","@aws-sdk/util-utf8-browser":"1.0.0-rc.3","@aws-sdk/util-utf8-node":"1.0.0-rc.3","tslib":"^2.0.0"},"devDependencies":{"@aws-sdk/client-documentation-generator":"1.0.0-rc.3","@types/chai":"^4.2.11","@types/mocha":"^7.0.2","@types/node":"^12.7.5","jest":"^26.1.0","rimraf":"^3.0.0","typedoc":"^0.17.8","typescript":"~4.0.2"},"engines":{"node":">=10.0.0"},"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","homepage":"https://github.com/aws/aws-sdk-js-v3/tree/master/clients/client-lex-runtime-service","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-lex-runtime-service"}}')},2482:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("36de"),o=new r["a"]("I18n"),i=function(){function e(e){this._options=null,this._lang=null,this._dict={},this._options=Object.assign({},e),this._lang=this._options.language,!this._lang&&"undefined"!==typeof window&&window&&window.navigator&&(this._lang=window.navigator.language),o.debug(this._lang)}return e.prototype.setLanguage=function(e){this._lang=e},e.prototype.get=function(e,t){if(void 0===t&&(t=void 0),!this._lang)return"undefined"!==typeof t?t:e;var n=this._lang,r=this.getByLanguage(e,n);return r||(n.indexOf("-")>0&&(r=this.getByLanguage(e,n.split("-")[0])),r||("undefined"!==typeof t?t:e))},e.prototype.getByLanguage=function(e,t,n){if(void 0===n&&(n=null),!t)return n;var r=this._dict[t];return r?r[e]:n},e.prototype.putVocabulariesForLanguage=function(e,t){var n=this._dict[e];n||(n=this._dict[e]={}),Object.assign(n,t)},e.prototype.putVocabularies=function(e){var t=this;Object.keys(e).map((function(n){t.putVocabulariesForLanguage(n,e[n])}))},e}(),a=n("7d03"),s=new r["a"]("I18n"),c=null,u=null,l=function(){function e(){}return e.configure=function(t){return s.debug("configure I18n"),t?(c=Object.assign({},c,t.I18n||t),e.createInstance(),c):c},e.getModuleName=function(){return"I18n"},e.createInstance=function(){s.debug("create I18n instance"),u||(u=new i(c))},e.setLanguage=function(t){return e.checkConfig(),u.setLanguage(t)},e.get=function(t,n){return e.checkConfig()?u.get(t,n):"undefined"===typeof n?t:n},e.putVocabulariesForLanguage=function(t,n){return e.checkConfig(),u.putVocabulariesForLanguage(t,n)},e.putVocabularies=function(t){return e.checkConfig(),u.putVocabularies(t)},e.checkConfig=function(){return u||(u=new i(c)),!0},e}();a["a"].register(l)},7585:function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return _})),n.d(t,"i",(function(){return S})),n.d(t,"j",(function(){return T})),n.d(t,"k",(function(){return a})),n.d(t,"l",(function(){return f})),n.d(t,"m",(function(){return v})),n.d(t,"n",(function(){return h})),n.d(t,"o",(function(){return b})),n.d(t,"p",(function(){return E})),n.d(t,"q",(function(){return u})),n.d(t,"r",(function(){return y})),n.d(t,"s",(function(){return l})),n.d(t,"t",(function(){return i})),n.d(t,"u",(function(){return s})),n.d(t,"v",(function(){return r}));var r="username",o="email",i="code",a="phone",s="password",c="country-dial-code-select",u="+1",l="amplify-auth-source",d="amplify-redirected-from-hosted-ui",f="amplify-authenticator-authState",p="Phone number can not be empty",m="No Auth module found, please ensure @aws-amplify/auth is imported",h="No Storage module found, please ensure @aws-amplify/storage is imported",v="No Interactions module found, please ensure @aws-amplify/interactions is imported",g="SETUP_TOTP",b="User has not set up software token mfa",E="User has not verified software token mfa",y="SUCCESS",w="auth",S="UI Auth",_="ToastAuthError",T="AuthStateChange"},"76cb":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r,o,i=n("60ac");(function(e){e["BACK_TO_SIGN_IN"]="Back to Sign In",e["CHANGE_PASSWORD_ACTION"]="Change",e["CHANGE_PASSWORD"]="Change Password",e["CODE_LABEL"]="Verification code",e["CODE_PLACEHOLDER"]="Enter code",e["CONFIRM_SIGN_UP_CODE_LABEL"]="Confirmation Code",e["CONFIRM_SIGN_UP_CODE_PLACEHOLDER"]="Enter your code",e["CONFIRM_SIGN_UP_HEADER_TEXT"]="Confirm Sign up",e["CONFIRM_SIGN_UP_LOST_CODE"]="Lost your code?",e["CONFIRM_SIGN_UP_RESEND_CODE"]="Resend Code",e["CONFIRM_SIGN_UP_SUBMIT_BUTTON_TEXT"]="Confirm",e["CONFIRM_SMS_CODE"]="Confirm SMS Code",e["CONFIRM_TOTP_CODE"]="Confirm TOTP Code",e["CONFIRM"]="Confirm",e["CREATE_ACCOUNT_TEXT"]="Create account",e["EMAIL_LABEL"]="Email Address *",e["EMAIL_PLACEHOLDER"]="Enter your email address",e["FORGOT_PASSWORD_TEXT"]="Forgot your password?",e["LESS_THAN_TWO_MFA_VALUES_MESSAGE"]="Less than two mfa types available",e["NEW_PASSWORD_LABEL"]="New password",e["NEW_PASSWORD_PLACEHOLDER"]="Enter your new password",e["NO_ACCOUNT_TEXT"]="No account?",e["USERNAME_REMOVE_WHITESPACE"]="Username cannot contains whitespace",e["PASSWORD_REMOVE_WHITESPACE"]="Password cannot start or end with whitespace",e["PASSWORD_LABEL"]="Password *",e["PASSWORD_PLACEHOLDER"]="Enter your password",e["PHONE_LABEL"]="Phone Number *",e["PHONE_PLACEHOLDER"]="(555) 555-1212",e["QR_CODE_ALT"]="qrcode",e["RESET_PASSWORD_TEXT"]="Reset password",e["RESET_YOUR_PASSWORD"]="Reset your password",e["SELECT_MFA_TYPE_HEADER_TEXT"]="Select MFA Type",e["SELECT_MFA_TYPE_SUBMIT_BUTTON_TEXT"]="Verify",e["SEND_CODE"]="Send Code",e["SUBMIT"]="Submit",e["SETUP_TOTP_REQUIRED"]="TOTP needs to be configured",e["SIGN_IN_ACTION"]="Sign In",e["SIGN_IN_HEADER_TEXT"]="Sign in to your account",e["SIGN_IN_TEXT"]="Sign in",e["SIGN_IN_WITH_AMAZON"]="Sign in with Amazon",e["SIGN_IN_WITH_AUTH0"]="Sign in with Auth0",e["SIGN_IN_WITH_AWS"]="Sign in with AWS",e["SIGN_IN_WITH_FACEBOOK"]="Sign in with Facebook",e["SIGN_IN_WITH_GOOGLE"]="Sign in with Google",e["SIGN_OUT"]="Sign Out",e["SIGN_UP_EMAIL_PLACEHOLDER"]="Email",e["SIGN_UP_HAVE_ACCOUNT_TEXT"]="Have an account?",e["SIGN_UP_HEADER_TEXT"]="Create a new account",e["SIGN_UP_PASSWORD_PLACEHOLDER"]="Password",e["SIGN_UP_SUBMIT_BUTTON_TEXT"]="Create Account",e["SIGN_UP_USERNAME_PLACEHOLDER"]="Username",e["SUCCESS_MFA_TYPE"]="Success! Your MFA Type is now:",e["TOTP_HEADER_TEXT"]="Scan then enter verification code",e["TOTP_LABEL"]="Enter Security Code:",e["TOTP_ISSUER"]="AWSCognito",e["TOTP_SETUP_FAILURE"]="TOTP Setup has failed",e["TOTP_SUBMIT_BUTTON_TEXT"]="Verify Security Token",e["TOTP_SUCCESS_MESSAGE"]="Setup TOTP successfully!",e["UNABLE_TO_SETUP_MFA_AT_THIS_TIME"]="Failed! Unable to configure MFA at this time",e["USERNAME_LABEL"]="Username *",e["USERNAME_PLACEHOLDER"]="Enter your username",e["VERIFY_CONTACT_EMAIL_LABEL"]="Email",e["VERIFY_CONTACT_HEADER_TEXT"]="Account recovery requires verified contact information",e["VERIFY_CONTACT_PHONE_LABEL"]="Phone Number",e["VERIFY_CONTACT_SUBMIT_LABEL"]="Submit",e["VERIFY_CONTACT_VERIFY_LABEL"]="Verify",e["ADDRESS_LABEL"]="Address",e["ADDRESS_PLACEHOLDER"]="Enter your address",e["NICKNAME_LABEL"]="Nickname",e["NICKNAME_PLACEHOLDER"]="Enter your nickname",e["BIRTHDATE_LABEL"]="Birthday",e["BIRTHDATE_PLACEHOLDER"]="Enter your birthday",e["PICTURE_LABEL"]="Picture URL",e["PICTURE_PLACEHOLDER"]="Enter your picture URL",e["FAMILY_NAME_LABEL"]="Family Name",e["FAMILY_NAME_PLACEHOLDER"]="Enter your family name",e["PREFERRED_USERNAME_LABEL"]="Preferred Username",e["PREFERRED_USERNAME_PLACEHOLDER"]="Enter your preferred username",e["GENDER_LABEL"]="Gender",e["GENDER_PLACEHOLDER"]="Enter your gender",e["PROFILE_LABEL"]="Profile URL",e["PROFILE_PLACEHOLDER"]="Enter your profile URL",e["GIVEN_NAME_LABEL"]="First Name",e["GIVEN_NAME_PLACEHOLDER"]="Enter your first name",e["ZONEINFO_LABEL"]="Time zone",e["ZONEINFO_PLACEHOLDER"]="Enter your time zone",e["LOCALE_LABEL"]="Locale",e["LOCALE_PLACEHOLDER"]="Enter your locale",e["UPDATED_AT_LABEL"]="Updated At",e["UPDATED_AT_PLACEHOLDER"]="Enter the time the information was last updated",e["MIDDLE_NAME_LABEL"]="Middle Name",e["MIDDLE_NAME_PLACEHOLDER"]="Enter your middle name",e["WEBSITE_LABEL"]="Website",e["WEBSITE_PLACEHOLDER"]="Enter your website",e["NAME_LABEL"]="Full Name",e["NAME_PLACEHOLDER"]="Enter your full name",e["PHOTO_PICKER_TITLE"]="Picker Title",e["PHOTO_PICKER_HINT"]="Ancillary text or content may occupy this space here",e["PHOTO_PICKER_PLACEHOLDER_HINT"]="Placeholder hint",e["PHOTO_PICKER_BUTTON_TEXT"]="Button",e["IMAGE_PICKER_TITLE"]="Add Profile Photo",e["IMAGE_PICKER_HINT"]="Preview the image before upload",e["IMAGE_PICKER_PLACEHOLDER_HINT"]="Tap to image select",e["IMAGE_PICKER_BUTTON_TEXT"]="Upload",e["PICKER_TEXT"]="Pick a file",e["TEXT_FALLBACK_CONTENT"]="Fallback Content",e["CONFIRM_SIGN_UP_FAILED"]="Confirm Sign Up Failed",e["SIGN_UP_FAILED"]="Sign Up Failed"})(r||(r={})),function(e){e["CHATBOT_TITLE"]="ChatBot Lex",e["TEXT_INPUT_PLACEHOLDER"]="Write a message",e["VOICE_INPUT_PLACEHOLDER"]="Click mic to speak",e["CHAT_DISABLED_ERROR"]="Error: Either voice or text must be enabled for the chatbot",e["NO_BOT_NAME_ERROR"]="Error: Bot name must be provided to ChatBot"}(o||(o={}));var a=Object.assign(Object.assign(Object.assign({},r),i["a"]),o)},"9b2c":function(e,t,n){"use strict";n.r(t),n.d(t,"amplify_chatbot",(function(){return P}));var r,o,i,a=n("0b1e"),s=n("36de"),c=n("1f3a"),u=n("2482"),l=n("76cb"),d=n("7585"),f=n("b597"),p=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):o(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))},m=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},h=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},v="application/octet-stream",g=16e3,b=2048,E=-10,y=-90,w=.85,S=function(e,t){for(var n=new Float32Array(t),r=0,o=0;o<e.length;o++)n.set(e[o],r),r+=e[o].length;return n},_=function(e,t,n){if(n===t)return e;var r=t/n,o=Math.round(e.length/r),i=new Float32Array(o),a=0,s=0;while(a<i.length){for(var c=Math.round((a+1)*r),u=0,l=0,d=s;d<c&&d<e.length;d++)u+=e[d],l++;i[a]=u/l,a++,s=c}return i},T=function(e,t,n){for(var r=t,o=0;o<n.length;o++,r+=2){var i=Math.max(-1,Math.min(1,n[o]));e.setInt16(r,i<0?32768*i:32767*i,!0)}},x=function(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))},A=function(e,t){var n=2*e.length,r=24,o=8+n,i=12+r+o,a=new ArrayBuffer(i),s=new DataView(a);return x(s,0,"RIFF"),s.setUint32(4,r+o,!0),x(s,8,"WAVE"),x(s,12,"fmt "),s.setUint32(16,r-8,!0),s.setUint16(20,1,!0),s.setUint16(22,1,!0),s.setUint32(24,t,!0),s.setUint32(28,2*t,!0),s.setUint16(32,2,!0),s.setUint16(34,16,!0),x(s,36,"data"),s.setUint32(40,n,!0),T(s,44,e),s},C=function(e,t,n,r){var o=S(e,t),i=_(o,n,r),a=A(i,r),s=new Blob([a],{type:v});return s},L=new s["a"]("AudioRecorder"),O=function(){function e(e){this.streamBuffer=[],this.streamBufferLength=0,this.recording=!1,this.options=e}return e.prototype.init=function(){return p(this,void 0,void 0,(function(){var e=this;return m(this,(function(t){switch(t.label){case 0:return Object(c["b"])().isBrowser?(window.AudioContext=window.AudioContext||window.webkitAudioContext,this.audioContext=new AudioContext,[4,navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.audioSupported=!0,e.setupAudioNodes(t)})).catch((function(){return e.audioSupported=!1,Promise.reject("Audio is not supported")}))]):[3,2];case 1:return t.sent(),[3,3];case 2:return this.audioSupported=!1,[2,Promise.reject("Audio is not supported")];case 3:return[2]}}))}))},e.prototype.setupAudioNodes=function(e){return p(this,void 0,void 0,(function(){var t,n,r,o,i=this;return m(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.audioContext.resume()];case 1:return a.sent(),[3,3];case 2:return t=a.sent(),L.error(t),[3,3];case 3:return n=this.audioContext.createMediaStreamSource(e),r=this.audioContext.createScriptProcessor(4096,1,1),r.onaudioprocess=function(e){if(i.recording){var t=e.inputBuffer.getChannelData(0);i.streamBuffer.push(new Float32Array(t)),i.streamBufferLength+=t.length,i.analyse()}},o=this.audioContext.createAnalyser(),o.minDecibels=y,o.maxDecibels=E,o.smoothingTimeConstant=w,n.connect(o),o.connect(r),r.connect(n.context.destination),this.analyserNode=o,[2]}}))}))},e.prototype.startRecording=function(e,t){return p(this,void 0,void 0,(function(){var n,r;return m(this,(function(o){switch(o.label){case 0:if(this.recording||!this.audioSupported)return[2];this.onSilence=e||function(){},this.visualizer=t||function(){},n=this.audioContext,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.resume()];case 2:return o.sent(),[3,4];case 3:return r=o.sent(),L.error(r),[3,4];case 4:return this.start=Date.now(),this.recording=!0,[2]}}))}))},e.prototype.stopRecording=function(){this.audioSupported&&(this.recording=!1)},e.prototype.clear=function(){this.stopRecording(),this.streamBufferLength=0,this.streamBuffer=[]},e.prototype.play=function(e){var t=this;if(e&&this.audioSupported){var n=new Blob([e]);return new Promise((function(e,r){var o=new FileReader;o.onload=function(){t.playbackSource&&t.playbackSource.disconnect(),t.playbackSource=t.audioContext.createBufferSource();var n=function(n){t.playbackSource.buffer=n,t.playbackSource.connect(t.audioContext.destination),t.playbackSource.onended=function(){return e()},t.playbackSource.start(0)},i=function(e){return r(e)};t.audioContext.decodeAudioData(o.result,n,i)},o.onerror=function(){return r()},o.readAsArrayBuffer(n)}))}},e.prototype.stop=function(){this.playbackSource&&this.playbackSource.stop()},e.prototype.analyse=function(){if(this.audioSupported){var e=this.analyserNode;e.fftSize=b;var t=e.fftSize,n=new Uint8Array(t),r=this.options.amplitude,o=this.options.time;e.getByteTimeDomainData(n),this.visualizer(n,t);for(var i=0;i<t;i++){var a=n[i]/128-1;(a>r||a<-1*r)&&(this.start=Date.now())}var s=Date.now(),c=s-this.start;c>o&&this.onSilence()}},e.prototype.exportWAV=function(e){return void 0===e&&(e=g),p(this,void 0,void 0,(function(){var t,n;return m(this,(function(r){return this.audioSupported?(t=this.audioContext.sampleRate,n=C(this.streamBuffer,this.streamBufferLength,t,e),this.clear(),[2,n]):[2]}))}))},e}(),I=function(e,t,n){if(n){if(!Object(c["b"])().isBrowser)throw new Error("Visualization is not supported on non-browsers.");var r=n.getBoundingClientRect(),o=r.width,i=r.height;n.width=o,n.height=i;var a=n.getContext("2d");a.fillStyle="white",a.clearRect(0,0,o,i);var s=function(){a.fillRect(0,0,o,i),a.lineWidth=1;var r=getComputedStyle(document.documentElement).getPropertyValue("--amplify-primary-color");a.strokeStyle=r&&""!==r?r:"#ff9900",a.beginPath();for(var s=1*o/t,c=0,u=0;u<t||u%3===0;u++){var l=e[u]/128,d=l*i/2;0===u?a.moveTo(c,d):a.lineTo(c,d),c+=s}a.lineTo(n.width,n.height/2),a.stroke()};requestAnimationFrame(s)}},N=".bot .dot{background-color:var(--bot-dot-color)}.user .dot{background-color:var(--user-dot-color)}.dot-flashing{width:2.625rem}.dot-flashing .dot{display:inline-block;width:0.625rem;height:0.625rem;border-radius:10rem;opacity:0.65}.dot-flashing .left{-webkit-animation:dot-flashing 1s infinite alternate;animation:dot-flashing 1s infinite alternate;-webkit-animation-delay:0s;animation-delay:0s}.dot-flashing .middle{margin-left:0.375rem;margin-right:0.375rem;-webkit-animation:dot-flashing 1s infinite linear alternate;animation:dot-flashing 1s infinite linear alternate;-webkit-animation-delay:0.5s;animation-delay:0.5s}.dot-flashing .right{-webkit-animation:dot-flashing 1s infinite alternate;animation:dot-flashing 1s infinite alternate;-webkit-animation-delay:1s;animation-delay:1s}@-webkit-keyframes dot-flashing{0%{opacity:0.65}50%,100%{opacity:0.1}}@keyframes dot-flashing{0%{opacity:0.65}50%,100%{opacity:0.1}}:host{--width:28.75rem;--height:37.5rem;--header-color:var(--amplify-secondary-color);--header-size:var(--amplify-text-lg);--bot-background-color:rgb(230, 230, 230);--bot-text-color:black;--bot-dot-color:var(--bot-text-color);--user-background-color:var(--amplify-blue);--user-text-color:var(--amplify-white);--user-dot-color:var(--user-text-color)}.amplify-chatbot{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-direction:column;flex-direction:column;background-color:var(--background-color);border-radius:0.375rem;-webkit-box-shadow:0.0625rem 0rem 0.25rem 0 rgba(0, 0, 0, 0.15);box-shadow:0.0625rem 0rem 0.25rem 0 rgba(0, 0, 0, 0.15);-webkit-box-sizing:border-box;box-sizing:border-box;font-family:var(--amplify-font-family);margin-bottom:1rem;width:100%;height:var(--height);max-width:var(--width)}@media (min-width: 672px){.amplify-chatbot{width:var(--width)}}.header{padding:1.25rem 0.375rem 1.25rem 0.375rem;color:var(--header-color);font-size:var(--header-size);font-weight:bold;text-align:center;word-wrap:break-word}.body{border-top:0.0625rem solid rgba(0, 0, 0, 0.05);padding:1.5rem 1rem 0 1rem;display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-direction:column;flex-direction:column;overflow:auto}.bubble{max-width:100%;padding:0.8em 1.4em;text-align:left;word-wrap:break-word;margin-bottom:0.625rem}.bot{margin-right:auto;background-color:var(--bot-background-color);color:var(--bot-text-color);border-radius:1.5rem 1.5rem 1.5rem 0}.user{margin-left:auto;background-color:var(--user-background-color);color:var(--user-text-color);border-radius:1.5rem 1.5rem 0 1.5rem}.footer{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;border-top:0.062rem solid rgba(0, 0, 0, 0.05);padding-right:0.625rem;min-height:3.125rem}.footer amplify-input{--border:none;--margin:0;-ms-flex-positive:1;flex-grow:1}canvas{margin-left:0.625rem;margin-right:0.625rem;-ms-flex-positive:1;flex-grow:1;height:3.125rem}.icon-button{--icon-height:1.25rem;--icon-fill:var(--amplify-primary-color);--padding:0.625rem;--width:auto}";(function(e){e[e["Initial"]=0]="Initial",e[e["Listening"]=1]="Listening",e[e["SendingText"]=2]="SendingText",e[e["SendingVoice"]=3]="SendingVoice",e[e["Error"]=4]="Error"})(r||(r={})),function(e){e["Bot"]="bot",e["User"]="user"}(o||(o={})),function(e){e[e["Recoverable"]=0]="Recoverable",e[e["Unrecoverable"]=1]="Unrecoverable"}(i||(i={}));var P=function(){function e(e){var t=this;Object(a["k"])(this,e),this.clearOnComplete=!1,this.conversationModeOn=!1,this.botTitle=l["a"].CHATBOT_TITLE,this.voiceEnabled=!1,this.textEnabled=!0,this.silenceTime=1500,this.silenceThreshold=.2,this.messages=[],this.text="",this.chatState=r.Initial,this.messageJSX=function(e){var n=e.map((function(e){return Object(a["i"])("div",{class:"bubble "+e.from},e.content)}));if(t.chatState===r.SendingText||t.chatState===r.SendingVoice){var i=t.chatState===r.SendingText?o.Bot:o.User;n.push(Object(a["i"])("div",{class:"bubble "+i},Object(a["i"])("div",{class:"dot-flashing "+i},Object(a["i"])("span",{class:"dot left"}),Object(a["i"])("span",{class:"dot middle"}),Object(a["i"])("span",{class:"dot right"}))))}return n},this.chatCompleted=Object(a["f"])(this,"chatCompleted",7)}return e.prototype.submitHandler=function(e){this.sendTextMessage()},e.prototype.componentWillLoad=function(){if(!f["a"]||"function"!==typeof f["a"].onComplete)throw new Error(d["m"]);this.validateProps()},e.prototype.componentDidRender=function(){var e=this.element.shadowRoot.querySelector(".body");e.scrollTop=e.scrollHeight},e.prototype.validateProps=function(){var e=this;if(this.voiceEnabled||this.textEnabled)if(this.botName){this.welcomeMessage&&this.appendToChat(this.welcomeMessage,o.Bot),this.voiceEnabled&&(this.audioRecorder=new O({time:this.silenceTime,amplitude:this.silenceThreshold}),this.audioRecorder.init().catch((function(t){e.setError(t,i.Recoverable)})));var t=function(t,n){e.chatCompleted.emit({data:n,err:t}),e.clearOnComplete?e.reset():e.chatState=r.Initial};try{f["a"].onComplete(this.botName,t)}catch(n){this.setError(n,i.Unrecoverable)}}else this.setError(l["a"].NO_BOT_NAME_ERROR,i.Unrecoverable);else this.setError(l["a"].CHAT_DISABLED_ERROR,i.Unrecoverable)},e.prototype.handleMicButton=function(){var e=this;this.chatState===r.Initial&&(this.audioRecorder.stop(),this.chatState=r.Listening,this.audioRecorder.startRecording((function(){return e.handleSilence()}),(function(t,n){return e.visualizer(t,n)})))},e.prototype.handleSilence=function(){var e=this;this.chatState=r.SendingVoice,this.audioRecorder.stopRecording(),this.audioRecorder.exportWAV().then((function(t){e.sendVoiceMessage(t)}))},e.prototype.handleTextChange=function(e){var t=e.target;this.text=t.value},e.prototype.handleCancelButton=function(){this.audioRecorder.clear(),this.chatState=r.Initial},e.prototype.handleToastClose=function(e){this.error=void 0,e===i.Recoverable&&(this.chatState=r.Initial)},e.prototype.visualizer=function(e,t){var n=this.element.shadowRoot.querySelector("canvas");I(e,t,n)},e.prototype.sendTextMessage=function(){return p(this,void 0,void 0,(function(){var e,t,n;return m(this,(function(a){switch(a.label){case 0:if(0===this.text.length||this.chatState!==r.Initial)return[2];e=this.text,this.text="",this.appendToChat(e,o.User),this.chatState=r.SendingText,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,f["a"].send(this.botName,e)];case 2:return t=a.sent(),[3,4];case 3:return n=a.sent(),this.setError(n,i.Recoverable),[2];case 4:return t.message&&this.appendToChat(t.message,o.Bot),this.chatState=r.Initial,[2]}}))}))},e.prototype.sendVoiceMessage=function(e){return p(this,void 0,void 0,(function(){var t,n,a,s,c=this;return m(this,(function(u){switch(u.label){case 0:t={content:e,options:{messageType:"voice"}},u.label=1;case 1:return u.trys.push([1,3,,4]),[4,f["a"].send(this.botName,t)];case 2:return n=u.sent(),[3,4];case 3:return a=u.sent(),this.setError(a,i.Recoverable),[2];case 4:return this.chatState=r.Initial,s=n.dialogState,n.inputTranscript&&this.appendToChat(n.inputTranscript,o.User),this.appendToChat(n.message,o.Bot),[4,this.audioRecorder.play(n.audioStream).then((function(){c.conversationModeOn&&"Fulfilled"!==s&&"Failed"!==s&&c.chatState===r.Initial&&c.handleMicButton()})).catch((function(e){return c.setError(e,i.Recoverable)}))];case 5:return u.sent(),[2]}}))}))},e.prototype.appendToChat=function(e,t){this.messages=h(this.messages,[{content:e,from:t}])},e.prototype.setError=function(e,t){var n="string"===typeof e?e:e.message;this.chatState=r.Error,this.error={message:n,errorType:t}},e.prototype.reset=function(){this.chatState=r.Initial,this.text="",this.error=void 0,this.messages=[],this.welcomeMessage&&this.appendToChat(this.welcomeMessage,o.Bot),this.audioRecorder&&this.audioRecorder.clear()},e.prototype.listeningFooterJSX=function(){var e=this,t=Object(a["i"])("canvas",{height:"50"}),n=Object(a["i"])("amplify-button",{"data-test":"chatbot-cancel-button",handleButtonClick:function(){return e.handleCancelButton()},class:"icon-button",variant:"icon",icon:"ban"});return[t,n]},e.prototype.footerJSX=function(){var e=this;if(this.chatState===r.Listening)return this.listeningFooterJSX();var t=this.textEnabled?l["a"].TEXT_INPUT_PLACEHOLDER:l["a"].VOICE_INPUT_PLACEHOLDER,n=Object(a["i"])("amplify-input",{placeholder:u["a"].get(t),description:"text",handleInputChange:function(t){return e.handleTextChange(t)},value:this.text,disabled:this.chatState===r.Error||!this.textEnabled}),o=this.voiceEnabled&&Object(a["i"])("amplify-button",{"data-test":"chatbot-mic-button",handleButtonClick:function(){return e.handleMicButton()},class:"icon-button",variant:"icon",icon:"microphone",disabled:this.chatState===r.Error||this.chatState!==r.Initial}),i=this.textEnabled&&Object(a["i"])("amplify-button",{"data-test":"chatbot-send-button",class:"icon-button",variant:"icon",icon:"send",handleButtonClick:function(){return e.sendTextMessage()},disabled:this.chatState===r.Error||this.chatState!==r.Initial});return[n,o,i]},e.prototype.errorToast=function(){var e=this;if(this.error){var t=this.error,n=t.message,r=t.errorType;return Object(a["i"])("amplify-toast",{message:u["a"].get(n),handleClose:function(){return e.handleToastClose(r)}})}},e.prototype.render=function(){return Object(a["i"])(a["b"],null,Object(a["i"])("div",{class:"amplify-chatbot"},Object(a["i"])("slot",{name:"header"},Object(a["i"])("div",{class:"header","data-test":"chatbot-header"},u["a"].get(this.botTitle))),Object(a["i"])("div",{class:"body","data-test":"chatbot-body"},this.messageJSX(this.messages)),Object(a["i"])("div",{class:"footer","data-test":"chatbot-footer"},this.footerJSX()),this.errorToast()))},Object.defineProperty(e.prototype,"element",{get:function(){return Object(a["h"])(this)},enumerable:!1,configurable:!0}),e}();P.style=N},b597:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ot}));var r=n("36de"),o=n("7d03"),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},a=new r["a"]("AbstractInteractionsProvider"),s=function(){function e(e){void 0===e&&(e={}),this._config=e}return e.prototype.configure=function(e){return void 0===e&&(e={}),this._config=i(i({},this._config),e),a.debug("configure "+this.getProviderName(),this._config),this.options},e.prototype.getCategory=function(){return"Interactions"},Object.defineProperty(e.prototype,"options",{get:function(){return i({},this._config)},enumerable:!0,configurable:!0}),e}(),c=function(e,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},c(e,t)};function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},l.apply(this,arguments)};function d(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):o(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function f(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}Object.create;function p(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{while((void 0===t||t-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a}Object.create;var m=n("0881"),h=n("be23"),v=n("2d49"),g=n("2767"),b=n("50c7"),E=n("735e"),y=n("4b75"),w=n("37db"),S=n("c14f"),_=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e.charCodeAt(n);if(o<128)t.push(o);else if(o<2048)t.push(o>>6|192,63&o|128);else if(n+1<e.length&&55296===(64512&o)&&56320===(64512&e.charCodeAt(n+1))){var i=65536+((1023&o)<<10)+(1023&e.charCodeAt(++n));t.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else t.push(o>>12|224,o>>6&63|128,63&o|128)}return Uint8Array.from(t)},T=function(e){for(var t="",n=0,r=e.length;n<r;n++){var o=e[n];if(o<128)t+=String.fromCharCode(o);else if(192<=o&&o<224){var i=e[++n];t+=String.fromCharCode((31&o)<<6|63&i)}else if(240<=o&&o<365){var a=[o,e[++n],e[++n],e[++n]],s="%"+a.map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&o)<<12|(63&e[++n])<<6|63&e[++n])}return t};function x(e){return(new TextEncoder).encode(e)}function A(e){return new TextDecoder("utf-8").decode(e)}var C,L,O,I,N,P,R,k,D,M,U,B,F,j,H,z,G,V,$,W,q,X,Y,K,J,Z,Q,ee,te,ne,re,oe,ie,ae,se,ce=function(e){return"function"===typeof TextEncoder?x(e):_(e)},ue=function(e){return"function"===typeof TextDecoder?A(e):T(e)},le="runtime.lex.{region}.amazonaws.com",de="runtime.lex.{region}.amazonaws.com.cn",fe="runtime.lex.{region}.c2s.ic.gov",pe="runtime.lex.{region}.sc2s.sgov.gov",me="runtime.lex.{region}.amazonaws.com",he=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),ve=new Set(["cn-north-1","cn-northwest-1"]),ge=new Set(["us-iso-east-1"]),be=new Set(["us-isob-east-1"]),Ee=new Set(["us-gov-east-1","us-gov-west-1"]),ye=function(e,t){var n=void 0;switch(e){case"eu-west-1":n={hostname:"runtime.lex.eu-west-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-east-1":n={hostname:"runtime.lex.us-east-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-west-2":n={hostname:"runtime.lex.us-west-2.amazonaws.com",partition:"aws",signingService:"lex"};break;default:he.has(e)&&(n={hostname:le.replace("{region}",e),partition:"aws",signingService:"lex"}),ve.has(e)&&(n={hostname:de.replace("{region}",e),partition:"aws-cn"}),ge.has(e)&&(n={hostname:fe.replace("{region}",e),partition:"aws-iso"}),be.has(e)&&(n={hostname:pe.replace("{region}",e),partition:"aws-iso-b"}),Ee.has(e)&&(n={hostname:me.replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:le.replace("{region}",e),partition:"aws",signingService:"lex"})}return Promise.resolve(n)},we={apiVersion:"2016-11-28",disableHostPrefix:!1,logger:{},regionInfoProvider:ye,signingName:"lex"},Se=l(l({},we),{runtime:"browser",base64Decoder:y["a"],base64Encoder:y["b"],bodyLengthChecker:w["a"],credentialDefaultProvider:Object(g["a"])("Credential is missing"),defaultUserAgent:Object(S["a"])(m.name,m.version),maxAttempts:b["a"],region:Object(g["a"])("Region is missing"),requestHandler:new v["a"],sha256:h["Sha256"],streamCollector:v["b"],urlParser:E["a"],utf8Decoder:ce,utf8Encoder:ue}),_e=n("36d4"),Te=n("9dac"),xe=n("365f"),Ae=n("fad4"),Ce=n("a9cb"),Le=n("f3b6"),Oe=n("108d"),Ie=function(e){function t(t){var n=this,r=l(l({},Se),t),o=Object(_e["b"])(r),i=Object(_e["a"])(o),a=Object(Ce["b"])(i),s=Object(b["c"])(a),c=Object(Le["b"])(s),u=Object(xe["b"])(c);return n=e.call(this,u)||this,n.config=u,n.middlewareStack.use(Object(Ce["a"])(n.config)),n.middlewareStack.use(Object(b["b"])(n.config)),n.middlewareStack.use(Object(Le["a"])(n.config)),n.middlewareStack.use(Object(Te["a"])(n.config)),n.middlewareStack.use(Object(xe["a"])(n.config)),n.middlewareStack.use(Object(Ae["a"])(n.config)),n}return u(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(Oe["a"]);(function(e){e.filterSensitiveLog=function(e){return l({},e)}})(C||(C={})),function(e){e.filterSensitiveLog=function(e){return l({},e)}}(L||(L={})),function(e){e.filterSensitiveLog=function(e){return l({},e)}}(O||(O={})),function(e){e.filterSensitiveLog=function(e){return l({},e)}}(I||(I={})),function(e){e.filterSensitiveLog=function(e){return l({},e)}}(N||(N={})),function(e){e.filterSensitiveLog=function(e){return l({},e)}}(P||(P={})),function(e){e.filterSensitiveLog=function(e){return l({},e)}}(R||(R={})),function(e){e.filterSensitiveLog=function(e){return l({},e)}}(k||(k={})),function(e){e["FAILED"]="Failed",e["FULFILLED"]="Fulfilled",e["READY_FOR_FULFILLMENT"]="ReadyForFulfillment"}(D||(D={})),function(e){e["COMPOSITE"]="Composite",e["CUSTOM_PAYLOAD"]="CustomPayload",e["PLAIN_TEXT"]="PlainText",e["SSML"]="SSML"}(M||(M={})),function(e){e["CLOSE"]="Close",e["CONFIRM_INTENT"]="ConfirmIntent",e["DELEGATE"]="Delegate",e["ELICIT_INTENT"]="ElicitIntent",e["ELICIT_SLOT"]="ElicitSlot"}(U||(U={})),function(e){e.filterSensitiveLog=function(e){return l(l(l({},e),e.slots&&{slots:Oe["d"]}),e.message&&{message:Oe["d"]})}}(B||(B={})),function(e){e["CONFIRMED"]="Confirmed",e["DENIED"]="Denied",e["NONE"]="None"}(F||(F={})),function(e){e.filterSensitiveLog=function(e){return l(l({},e),e.slots&&{slots:Oe["d"]})}}(j||(j={})),function(e){e.filterSensitiveLog=function(e){return l(l(l(l({},e),e.dialogAction&&{dialogAction:B.filterSensitiveLog(e.dialogAction)}),e.recentIntentSummaryView&&{recentIntentSummaryView:e.recentIntentSummaryView.map((function(e){return j.filterSensitiveLog(e)}))}),e.sessionAttributes&&{sessionAttributes:Oe["d"]})}}(H||(H={})),function(e){e.filterSensitiveLog=function(e){return l({},e)}}(z||(z={})),function(e){e.filterSensitiveLog=function(e){return l({},e)}}(G||(G={})),function(e){e.filterSensitiveLog=function(e){return l({},e)}}(V||(V={})),function(e){e.filterSensitiveLog=function(e){return l({},e)}}($||($={})),function(e){e.filterSensitiveLog=function(e){return l(l(l({},e),e.requestAttributes&&{requestAttributes:Oe["d"]}),e.sessionAttributes&&{sessionAttributes:Oe["d"]})}}(W||(W={})),function(e){e["CONFIRM_INTENT"]="ConfirmIntent",e["ELICIT_INTENT"]="ElicitIntent",e["ELICIT_SLOT"]="ElicitSlot",e["FAILED"]="Failed",e["FULFILLED"]="Fulfilled",e["READY_FOR_FULFILLMENT"]="ReadyForFulfillment"}(q||(q={})),function(e){e.filterSensitiveLog=function(e){return l(l({},e),e.message&&{message:Oe["d"]})}}(X||(X={})),function(e){e.filterSensitiveLog=function(e){return l({},e)}}(Y||(Y={})),function(e){e.filterSensitiveLog=function(e){return l({},e)}}(K||(K={})),function(e){e.filterSensitiveLog=function(e){return l(l(l(l({},e),e.requestAttributes&&{requestAttributes:Oe["d"]}),e.inputText&&{inputText:Oe["d"]}),e.sessionAttributes&&{sessionAttributes:Oe["d"]})}}(J||(J={})),function(e){e.filterSensitiveLog=function(e){return l({},e)}}(Z||(Z={})),function(e){e.filterSensitiveLog=function(e){return l(l({},e),e.slots&&{slots:Oe["d"]})}}(Q||(Q={})),function(e){e["GENERIC"]="application/vnd.amazonaws.card.generic"}(ee||(ee={})),function(e){e.filterSensitiveLog=function(e){return l({},e)}}(te||(te={})),function(e){e.filterSensitiveLog=function(e){return l({},e)}}(ne||(ne={})),function(e){e.filterSensitiveLog=function(e){return l({},e)}}(re||(re={})),function(e){e.filterSensitiveLog=function(e){return l({},e)}}(oe||(oe={})),function(e){e.filterSensitiveLog=function(e){return l(l(l(l(l({},e),e.alternativeIntents&&{alternativeIntents:e.alternativeIntents.map((function(e){return Q.filterSensitiveLog(e)}))}),e.message&&{message:Oe["d"]}),e.sessionAttributes&&{sessionAttributes:Oe["d"]}),e.slots&&{slots:Oe["d"]})}}(ie||(ie={})),function(e){e.filterSensitiveLog=function(e){return l(l(l(l({},e),e.dialogAction&&{dialogAction:B.filterSensitiveLog(e.dialogAction)}),e.recentIntentSummaryView&&{recentIntentSummaryView:e.recentIntentSummaryView.map((function(e){return j.filterSensitiveLog(e)}))}),e.sessionAttributes&&{sessionAttributes:Oe["d"]})}}(ae||(ae={})),function(e){e.filterSensitiveLog=function(e){return l(l({},e),e.message&&{message:Oe["d"]})}}(se||(se={}));var Ne=n("1279"),Pe=function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,o,i,a,s,c,u,d;return f(this,(function(f){switch(f.label){case 0:if(n=l(l(l(l({"Content-Type":"application/octet-stream","x-amz-content-sha256":"UNSIGNED-PAYLOAD"},ut(e.requestAttributes)&&{"x-amz-lex-request-attributes":Oe["c"].fromObject(e.requestAttributes)}),ut(e.sessionAttributes)&&{"x-amz-lex-session-attributes":Oe["c"].fromObject(e.sessionAttributes)}),ut(e.contentType)&&{"Content-Type":e.contentType}),ut(e.accept)&&{Accept:e.accept}),r="/bot/{botName}/alias/{botAlias}/user/{userId}/content",void 0===e.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if(o=e.botAlias,o.length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(r=r.replace("{botAlias}",Object(Oe["f"])(o)),void 0===e.botName)throw new Error("No value provided for input HTTP label: botName.");if(o=e.botName,o.length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(r=r.replace("{botName}",Object(Oe["f"])(o)),void 0===e.userId)throw new Error("No value provided for input HTTP label: userId.");if(o=e.userId,o.length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return r=r.replace("{userId}",Object(Oe["f"])(o)),void 0!==e.inputStream&&(i=e.inputStream),[4,t.endpoint()];case 1:return a=f.sent(),s=a.hostname,c=a.protocol,u=void 0===c?"https":c,d=a.port,[2,new Ne["a"]({protocol:u,hostname:s,port:d,method:"POST",headers:n,path:r,body:i})]}}))}))},Re=function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,o,i,a,s,c,u,d;return f(this,(function(f){switch(f.label){case 0:if(n={"Content-Type":"application/json"},r="/bot/{botName}/alias/{botAlias}/user/{userId}/text",void 0===e.userId)throw new Error("No value provided for input HTTP label: userId.");if(o=e.userId,o.length<=0)throw new Error("Empty value provided for input HTTP label: userId.");if(r=r.replace("{userId}",Object(Oe["f"])(o)),void 0===e.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if(o=e.botAlias,o.length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(r=r.replace("{botAlias}",Object(Oe["f"])(o)),void 0===e.botName)throw new Error("No value provided for input HTTP label: botName.");if(o=e.botName,o.length<=0)throw new Error("Empty value provided for input HTTP label: botName.");return r=r.replace("{botName}",Object(Oe["f"])(o)),i=JSON.stringify(l(l(l({},void 0!==e.inputText&&{inputText:e.inputText}),void 0!==e.requestAttributes&&{requestAttributes:Ye(e.requestAttributes,t)}),void 0!==e.sessionAttributes&&{sessionAttributes:Ye(e.sessionAttributes,t)})),[4,t.endpoint()];case 1:return a=f.sent(),s=a.hostname,c=a.protocol,u=void 0===c?"https":c,d=a.port,[2,new Ne["a"]({protocol:u,hostname:s,port:d,method:"POST",headers:n,path:r,body:i})]}}))}))},ke=function(e,t){return d(void 0,void 0,void 0,(function(){var n,r;return f(this,(function(o){return 200!==e.statusCode&&e.statusCode>=300?[2,De(e,t)]:(n={$metadata:at(e),alternativeIntents:void 0,audioStream:void 0,botVersion:void 0,contentType:void 0,dialogState:void 0,inputTranscript:void 0,intentName:void 0,message:void 0,messageFormat:void 0,nluIntentConfidence:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},void 0!==e.headers["x-amz-lex-alternative-intents"]&&(n.alternativeIntents=new Oe["c"](e.headers["x-amz-lex-alternative-intents"])),void 0!==e.headers["x-amz-lex-message-format"]&&(n.messageFormat=e.headers["x-amz-lex-message-format"]),void 0!==e.headers["content-type"]&&(n.contentType=e.headers["content-type"]),void 0!==e.headers["x-amz-lex-message"]&&(n.message=e.headers["x-amz-lex-message"]),void 0!==e.headers["x-amz-lex-bot-version"]&&(n.botVersion=e.headers["x-amz-lex-bot-version"]),void 0!==e.headers["x-amz-lex-sentiment"]&&(n.sentimentResponse=e.headers["x-amz-lex-sentiment"]),void 0!==e.headers["x-amz-lex-slots"]&&(n.slots=new Oe["c"](e.headers["x-amz-lex-slots"])),void 0!==e.headers["x-amz-lex-input-transcript"]&&(n.inputTranscript=e.headers["x-amz-lex-input-transcript"]),void 0!==e.headers["x-amz-lex-slot-to-elicit"]&&(n.slotToElicit=e.headers["x-amz-lex-slot-to-elicit"]),void 0!==e.headers["x-amz-lex-session-attributes"]&&(n.sessionAttributes=new Oe["c"](e.headers["x-amz-lex-session-attributes"])),void 0!==e.headers["x-amz-lex-session-id"]&&(n.sessionId=e.headers["x-amz-lex-session-id"]),void 0!==e.headers["x-amz-lex-dialog-state"]&&(n.dialogState=e.headers["x-amz-lex-dialog-state"]),void 0!==e.headers["x-amz-lex-intent-name"]&&(n.intentName=e.headers["x-amz-lex-intent-name"]),void 0!==e.headers["x-amz-lex-nlu-intent-confidence"]&&(n.nluIntentConfidence=new Oe["c"](e.headers["x-amz-lex-nlu-intent-confidence"])),r=e.body,n.audioStream=r,[2,Promise.resolve(n)])}))}))},De=function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,o,i,a,s,c,u,d,p,m,h,v,g,b,E,y,w,S;return f(this,(function(f){switch(f.label){case 0:return r=[l({},e)],S={},[4,lt(e.body,t)];case 1:switch(n=l.apply(void 0,r.concat([(S.body=f.sent(),S)])),i="UnknownError",i=dt(e,n.body),a=i,a){case"BadGatewayException":return[3,2];case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":return[3,4];case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":return[3,6];case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":return[3,8];case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":return[3,10];case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":return[3,12];case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":return[3,14];case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotAcceptableException":return[3,16];case"com.amazonaws.lexruntimeservice#NotAcceptableException":return[3,16];case"NotFoundException":return[3,18];case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,18];case"RequestTimeoutException":return[3,20];case"com.amazonaws.lexruntimeservice#RequestTimeoutException":return[3,20];case"UnsupportedMediaTypeException":return[3,22];case"com.amazonaws.lexruntimeservice#UnsupportedMediaTypeException":return[3,22]}return[3,24];case 2:return s=[{}],[4,Be(n,t)];case 3:return o=l.apply(void 0,[l.apply(void 0,s.concat([f.sent()])),{name:i,$metadata:at(e)}]),[3,25];case 4:return c=[{}],[4,Fe(n,t)];case 5:return o=l.apply(void 0,[l.apply(void 0,c.concat([f.sent()])),{name:i,$metadata:at(e)}]),[3,25];case 6:return u=[{}],[4,je(n,t)];case 7:return o=l.apply(void 0,[l.apply(void 0,u.concat([f.sent()])),{name:i,$metadata:at(e)}]),[3,25];case 8:return d=[{}],[4,He(n,t)];case 9:return o=l.apply(void 0,[l.apply(void 0,d.concat([f.sent()])),{name:i,$metadata:at(e)}]),[3,25];case 10:return p=[{}],[4,ze(n,t)];case 11:return o=l.apply(void 0,[l.apply(void 0,p.concat([f.sent()])),{name:i,$metadata:at(e)}]),[3,25];case 12:return m=[{}],[4,Ge(n,t)];case 13:return o=l.apply(void 0,[l.apply(void 0,m.concat([f.sent()])),{name:i,$metadata:at(e)}]),[3,25];case 14:return h=[{}],[4,Ve(n,t)];case 15:return o=l.apply(void 0,[l.apply(void 0,h.concat([f.sent()])),{name:i,$metadata:at(e)}]),[3,25];case 16:return v=[{}],[4,$e(n,t)];case 17:return o=l.apply(void 0,[l.apply(void 0,v.concat([f.sent()])),{name:i,$metadata:at(e)}]),[3,25];case 18:return g=[{}],[4,We(n,t)];case 19:return o=l.apply(void 0,[l.apply(void 0,g.concat([f.sent()])),{name:i,$metadata:at(e)}]),[3,25];case 20:return b=[{}],[4,qe(n,t)];case 21:return o=l.apply(void 0,[l.apply(void 0,b.concat([f.sent()])),{name:i,$metadata:at(e)}]),[3,25];case 22:return E=[{}],[4,Xe(n,t)];case 23:return o=l.apply(void 0,[l.apply(void 0,E.concat([f.sent()])),{name:i,$metadata:at(e)}]),[3,25];case 24:y=n.body,i=y.code||y.Code||i,o=l(l({},y),{name:""+i,message:y.message||y.Message||i,$fault:"client",$metadata:at(e)}),f.label=25;case 25:return w=o.message||o.Message||i,o.message=w,delete o.Message,[2,Promise.reject(Object.assign(new Error(w),o))]}}))}))},Me=function(e,t){return d(void 0,void 0,void 0,(function(){var n,r;return f(this,(function(o){switch(o.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Ue(e,t)]:(n={$metadata:at(e),alternativeIntents:void 0,botVersion:void 0,dialogState:void 0,intentName:void 0,message:void 0,messageFormat:void 0,nluIntentConfidence:void 0,responseCard:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},[4,lt(e.body,t)]);case 1:return r=o.sent(),void 0!==r.alternativeIntents&&null!==r.alternativeIntents&&(n.alternativeIntents=et(r.alternativeIntents,t)),void 0!==r.botVersion&&null!==r.botVersion&&(n.botVersion=r.botVersion),void 0!==r.dialogState&&null!==r.dialogState&&(n.dialogState=r.dialogState),void 0!==r.intentName&&null!==r.intentName&&(n.intentName=r.intentName),void 0!==r.message&&null!==r.message&&(n.message=r.message),void 0!==r.messageFormat&&null!==r.messageFormat&&(n.messageFormat=r.messageFormat),void 0!==r.nluIntentConfidence&&null!==r.nluIntentConfidence&&(n.nluIntentConfidence=Qe(r.nluIntentConfidence,t)),void 0!==r.responseCard&&null!==r.responseCard&&(n.responseCard=rt(r.responseCard,t)),void 0!==r.sentimentResponse&&null!==r.sentimentResponse&&(n.sentimentResponse=ot(r.sentimentResponse,t)),void 0!==r.sessionAttributes&&null!==r.sessionAttributes&&(n.sessionAttributes=it(r.sessionAttributes,t)),void 0!==r.sessionId&&null!==r.sessionId&&(n.sessionId=r.sessionId),void 0!==r.slotToElicit&&null!==r.slotToElicit&&(n.slotToElicit=r.slotToElicit),void 0!==r.slots&&null!==r.slots&&(n.slots=it(r.slots,t)),[2,Promise.resolve(n)]}}))}))},Ue=function(e,t){return d(void 0,void 0,void 0,(function(){var n,r,o,i,a,s,c,u,d,p,m,h,v,g,b,E;return f(this,(function(f){switch(f.label){case 0:return r=[l({},e)],E={},[4,lt(e.body,t)];case 1:switch(n=l.apply(void 0,r.concat([(E.body=f.sent(),E)])),i="UnknownError",i=dt(e,n.body),a=i,a){case"BadGatewayException":return[3,2];case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":return[3,4];case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":return[3,6];case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":return[3,8];case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":return[3,10];case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":return[3,12];case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":return[3,14];case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotFoundException":return[3,16];case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,16]}return[3,18];case 2:return s=[{}],[4,Be(n,t)];case 3:return o=l.apply(void 0,[l.apply(void 0,s.concat([f.sent()])),{name:i,$metadata:at(e)}]),[3,19];case 4:return c=[{}],[4,Fe(n,t)];case 5:return o=l.apply(void 0,[l.apply(void 0,c.concat([f.sent()])),{name:i,$metadata:at(e)}]),[3,19];case 6:return u=[{}],[4,je(n,t)];case 7:return o=l.apply(void 0,[l.apply(void 0,u.concat([f.sent()])),{name:i,$metadata:at(e)}]),[3,19];case 8:return d=[{}],[4,He(n,t)];case 9:return o=l.apply(void 0,[l.apply(void 0,d.concat([f.sent()])),{name:i,$metadata:at(e)}]),[3,19];case 10:return p=[{}],[4,ze(n,t)];case 11:return o=l.apply(void 0,[l.apply(void 0,p.concat([f.sent()])),{name:i,$metadata:at(e)}]),[3,19];case 12:return m=[{}],[4,Ge(n,t)];case 13:return o=l.apply(void 0,[l.apply(void 0,m.concat([f.sent()])),{name:i,$metadata:at(e)}]),[3,19];case 14:return h=[{}],[4,Ve(n,t)];case 15:return o=l.apply(void 0,[l.apply(void 0,h.concat([f.sent()])),{name:i,$metadata:at(e)}]),[3,19];case 16:return v=[{}],[4,We(n,t)];case 17:return o=l.apply(void 0,[l.apply(void 0,v.concat([f.sent()])),{name:i,$metadata:at(e)}]),[3,19];case 18:g=n.body,i=g.code||g.Code||i,o=l(l({},g),{name:""+i,message:g.message||g.Message||i,$fault:"client",$metadata:at(e)}),f.label=19;case 19:return b=o.message||o.Message||i,o.message=b,delete o.Message,[2,Promise.reject(Object.assign(new Error(b),o))]}}))}))},Be=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return f(this,(function(r){return t={name:"BadGatewayException",$fault:"server",$metadata:at(e),Message:void 0},n=e.body,void 0!==n.Message&&null!==n.Message&&(t.Message=n.Message),[2,t]}))}))},Fe=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return f(this,(function(r){return t={name:"BadRequestException",$fault:"client",$metadata:at(e),message:void 0},n=e.body,void 0!==n.message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},je=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return f(this,(function(r){return t={name:"ConflictException",$fault:"client",$metadata:at(e),message:void 0},n=e.body,void 0!==n.message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},He=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return f(this,(function(r){return t={name:"DependencyFailedException",$fault:"client",$metadata:at(e),Message:void 0},n=e.body,void 0!==n.Message&&null!==n.Message&&(t.Message=n.Message),[2,t]}))}))},ze=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return f(this,(function(r){return t={name:"InternalFailureException",$fault:"server",$metadata:at(e),message:void 0},n=e.body,void 0!==n.message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},Ge=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return f(this,(function(r){return t={name:"LimitExceededException",$fault:"client",$metadata:at(e),message:void 0,retryAfterSeconds:void 0},void 0!==e.headers["retry-after"]&&(t.retryAfterSeconds=e.headers["retry-after"]),n=e.body,void 0!==n.message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},Ve=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return f(this,(function(r){return t={name:"LoopDetectedException",$fault:"server",$metadata:at(e),Message:void 0},n=e.body,void 0!==n.Message&&null!==n.Message&&(t.Message=n.Message),[2,t]}))}))},$e=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return f(this,(function(r){return t={name:"NotAcceptableException",$fault:"client",$metadata:at(e),message:void 0},n=e.body,void 0!==n.message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},We=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return f(this,(function(r){return t={name:"NotFoundException",$fault:"client",$metadata:at(e),message:void 0},n=e.body,void 0!==n.message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},qe=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return f(this,(function(r){return t={name:"RequestTimeoutException",$fault:"client",$metadata:at(e),message:void 0},n=e.body,void 0!==n.message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},Xe=function(e,t){return d(void 0,void 0,void 0,(function(){var t,n;return f(this,(function(r){return t={name:"UnsupportedMediaTypeException",$fault:"client",$metadata:at(e),message:void 0},n=e.body,void 0!==n.message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},Ye=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=p(t,2),o=r[0],i=r[1];return l(l({},e),(n={},n[o]=i,n))}),{})},Ke=function(e,t){return{text:void 0!==e.text&&null!==e.text?e.text:void 0,value:void 0!==e.value&&null!==e.value?e.value:void 0}},Je=function(e,t){return{attachmentLinkUrl:void 0!==e.attachmentLinkUrl&&null!==e.attachmentLinkUrl?e.attachmentLinkUrl:void 0,buttons:void 0!==e.buttons&&null!==e.buttons?tt(e.buttons,t):void 0,imageUrl:void 0!==e.imageUrl&&null!==e.imageUrl?e.imageUrl:void 0,subTitle:void 0!==e.subTitle&&null!==e.subTitle?e.subTitle:void 0,title:void 0!==e.title&&null!==e.title?e.title:void 0}},Ze=function(e,t){return(e||[]).map((function(e){return Je(e,t)}))},Qe=function(e,t){return{score:void 0!==e.score&&null!==e.score?e.score:void 0}},et=function(e,t){return(e||[]).map((function(e){return nt(e,t)}))},tt=function(e,t){return(e||[]).map((function(e){return Ke(e,t)}))},nt=function(e,t){return{intentName:void 0!==e.intentName&&null!==e.intentName?e.intentName:void 0,nluIntentConfidence:void 0!==e.nluIntentConfidence&&null!==e.nluIntentConfidence?Qe(e.nluIntentConfidence,t):void 0,slots:void 0!==e.slots&&null!==e.slots?it(e.slots,t):void 0}},rt=function(e,t){return{contentType:void 0!==e.contentType&&null!==e.contentType?e.contentType:void 0,genericAttachments:void 0!==e.genericAttachments&&null!==e.genericAttachments?Ze(e.genericAttachments,t):void 0,version:void 0!==e.version&&null!==e.version?e.version:void 0}},ot=function(e,t){return{sentimentLabel:void 0!==e.sentimentLabel&&null!==e.sentimentLabel?e.sentimentLabel:void 0,sentimentScore:void 0!==e.sentimentScore&&null!==e.sentimentScore?e.sentimentScore:void 0}},it=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=p(t,2),o=r[0],i=r[1];return l(l({},e),(n={},n[o]=i,n))}),{})},at=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},st=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},ct=function(e,t){return st(e,t).then((function(e){return t.utf8Encoder(e)}))},ut=function(e){return void 0!==e&&""!==e&&(!Object.getOwnPropertyNames(e).includes("length")||0!=e.length)&&(!Object.getOwnPropertyNames(e).includes("size")||0!=e.size)},lt=function(e,t){return ct(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},dt=function(e,t){var n=function(e,t){return Object.keys(e).find((function(e){return e.toLowerCase()===t.toLowerCase()}))},r=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},o=n(e.headers,"x-amzn-errortype");return void 0!==o?r(e.headers[o]):void 0!==t.code?r(t.code):void 0!==t["__type"]?r(t["__type"]):""},ft=n("991b"),pt=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return u(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(ft["a"])(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.logger,i="LexRuntimeServiceClient",a="PostTextCommand",s={logger:o,clientName:i,commandName:a,inputFilterSensitiveLog:J.filterSensitiveLog,outputFilterSensitiveLog:ie.filterSensitiveLog};"function"===typeof o.info&&o.info({clientName:i,commandName:a});var c=t.requestHandler;return r.resolve((function(e){return c.handle(e.request,n||{})}),s)},t.prototype.serialize=function(e,t){return Re(e,t)},t.prototype.deserialize=function(e,t){return Me(e,t)},t}(Oe["b"]),mt=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return u(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Object(ft["a"])(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.logger,i="LexRuntimeServiceClient",a="PostContentCommand",s={logger:o,clientName:i,commandName:a,inputFilterSensitiveLog:W.filterSensitiveLog,outputFilterSensitiveLog:X.filterSensitiveLog};"function"===typeof o.info&&o.info({clientName:i,commandName:a});var c=t.requestHandler;return r.resolve((function(e){return c.handle(e.request,n||{})}),s)},t.prototype.serialize=function(e,t){return Pe(e,t)},t.prototype.deserialize=function(e,t){return ke(e,t)},t}(Oe["b"]),ht=n("475d"),vt=n("fab4"),gt=function(e){if(e instanceof Blob||e instanceof ReadableStream)return new Response(e).arrayBuffer().then((function(e){return new Uint8Array(e)}));throw new Error("Readable is not supported.")},bt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Et=function(){return Et=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Et.apply(this,arguments)},yt=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):o(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))},wt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},St=new r["a"]("AWSLexProvider"),_t=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n._botsCompleteCallback={},n}return bt(t,e),t.prototype.getProviderName=function(){return"AWSLexProvider"},t.prototype.reportBotStatus=function(e,t){var n=this;St.debug("postContent state",e.dialogState),"ReadyForFulfillment"!==e.dialogState&&"Fulfilled"!==e.dialogState||("function"===typeof this._botsCompleteCallback[t]&&setTimeout((function(){return n._botsCompleteCallback[t](null,{slots:e.slots})}),0),this._config&&"function"===typeof this._config[t].onComplete&&setTimeout((function(){return n._config[t].onComplete(null,{slots:e.slots})}),0)),"Failed"===e.dialogState&&("function"===typeof this._botsCompleteCallback[t]&&setTimeout((function(){return n._botsCompleteCallback[t]("Bot conversation failed")}),0),this._config&&"function"===typeof this._config[t].onComplete&&setTimeout((function(){return n._config[t].onComplete("Bot conversation failed")}),0))},t.prototype.sendMessage=function(e,t){return yt(this,void 0,void 0,(function(){var n,r,o,i,a,s,c,u,l,d;return wt(this,(function(f){switch(f.label){case 0:return this._config[e]?[4,ht["a"].get()]:[2,Promise.reject("Bot "+e+" does not exist")];case 1:if(n=f.sent(),!n)return[2,Promise.reject("No credentials")];if(this.lexRuntimeServiceClient=new Ie({region:this._config[e].region,credentials:n,customUserAgent:Object(vt["b"])()}),"string"!==typeof t)return[3,6];r={botAlias:this._config[e].alias,botName:e,inputText:t,userId:n.identityId},St.debug("postText to lex",t),f.label=2;case 2:return f.trys.push([2,4,,5]),o=new pt(r),[4,this.lexRuntimeServiceClient.send(o)];case 3:return u=f.sent(),this.reportBotStatus(u,e),[2,u];case 4:return i=f.sent(),[2,Promise.reject(i)];case 5:return[3,11];case 6:a=t.content,s=t.options.messageType,r="voice"===s?{botAlias:this._config[e].alias,botName:e,contentType:"audio/x-l16; sample-rate=16000",inputStream:a,userId:n.identityId,accept:"audio/mpeg"}:{botAlias:this._config[e].alias,botName:e,contentType:"text/plain; charset=utf-8",inputStream:a,userId:n.identityId,accept:"audio/mpeg"},St.debug("postContent to lex",t),f.label=7;case 7:return f.trys.push([7,10,,11]),c=new mt(r),[4,this.lexRuntimeServiceClient.send(c)];case 8:return u=f.sent(),[4,gt(u.audioStream)];case 9:return l=f.sent(),this.reportBotStatus(u,e),[2,Et(Et({},u),{audioStream:l})];case 10:return d=f.sent(),[2,Promise.reject(d)];case 11:return[2]}}))}))},t.prototype.onComplete=function(e,t){if(!this._config[e])throw new ErrorEvent("Bot "+e+" does not exist");this._botsCompleteCallback[e]=t},t}(s),Tt=function(){return Tt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Tt.apply(this,arguments)},xt=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):o(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())}))},At=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},Ct=new r["a"]("Interactions"),Lt=function(){function e(e){this._options=e,Ct.debug("Interactions Options",this._options),this._pluggables={}}return e.prototype.getModuleName=function(){return"Interactions"},e.prototype.configure=function(e){var t=this,n=e?e.Interactions||e:{};Ct.debug("configure Interactions",{opt:n}),this._options=Tt(Tt({bots:{}},n),n.Interactions);var r=this._options.aws_bots_config,o=this._options.bots;return!Object.keys(o).length&&r&&Array.isArray(r)&&r.forEach((function(e){t._options.bots[e.name]=e})),!this._pluggables.AWSLexProvider&&o&&Object.keys(o).map((function(e){return o[e]})).find((function(e){return!e.providerName||"AWSLexProvider"===e.providerName}))&&(this._pluggables.AWSLexProvider=new _t),Object.keys(this._pluggables).map((function(e){t._pluggables[e].configure(t._options.bots)})),this._options},e.prototype.addPluggable=function(e){if(e&&"Interactions"===e.getCategory()){if(this._pluggables[e.getProviderName()])throw new Error("Bot "+e.getProviderName()+" already plugged");return e.configure(this._options.bots),void(this._pluggables[e.getProviderName()]=e)}},e.prototype.send=function(e,t){return xt(this,void 0,void 0,(function(){var n;return At(this,(function(r){switch(r.label){case 0:if(!this._options.bots||!this._options.bots[e])throw new Error("Bot "+e+" does not exist");if(n=this._options.bots[e].providerName||"AWSLexProvider",!this._pluggables[n])throw new Error("Bot "+n+" does not have valid pluggin did you try addPluggable first?");return[4,this._pluggables[n].sendMessage(e,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.onComplete=function(e,t){if(!this._options.bots||!this._options.bots[e])throw new Error("Bot "+e+" does not exist");var n=this._options.bots[e].providerName||"AWSLexProvider";if(!this._pluggables[n])throw new Error("Bot "+n+" does not have valid pluggin did you try addPluggable first?");this._pluggables[n].onComplete(e,t)},e}(),Ot=new Lt(null);o["a"].register(Ot)}}]);
//# sourceMappingURL=chunk-65a529e0.0eddb3a2.js.map